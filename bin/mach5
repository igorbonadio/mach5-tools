#!/usr/bin/env ruby
$LOAD_PATH.unshift(File.join(File.dirname(__FILE__), '..', 'lib'))
$LOAD_PATH.unshift(File.dirname(__FILE__))

require 'mach5-tools'
require 'thor'

class App < Thor
  desc "benchmark", "Run benchmarks"
  method_option :all, :type => :boolean, :aliases => "-a", :desc => "Run all benchmarks even if there is already a result"
  def benchmark
    runner = Mach5::Runner.new(eval(File.open("Mach5file").readlines.join))
    runner.benchmark(all: options.all)
  end

  default_task :benchmark
end

App.start